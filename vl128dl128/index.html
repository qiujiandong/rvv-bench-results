<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>RVV benchmark VLEN128 DLEN128</title>
	<link rel="stylesheet" href="../base.css">
	<script type="text/javascript" src="../base.js"></script>
</head>
<body class="base">

<header><h1>RVV benchmark VLEN128 DLEN128</h1></header>

<p></p>

<ul>
	<li><a href="../index.html">Return to parent page</a></li>
</ul>

<p>Based on <a href="https://github.com/qiujiandong/rvv-bench/commit/67c9b2231762c1358db1595a20ff9ef9de1113ed">this commit</a>.</p>

<h2>Benchmarks</h2>

<ul>
	<li><a href="memcpy.html">memcpy</a></li>
	<li><a href="memset.html">memset</a></li>
	<li><a href="strlen.html">strlen</a></li>
	<li><a href="utf8_count.html">utf8 count</a></li>
	<li><a href="mergelines.html">merge escaped lines</a></li>
	<li><a href="mandelbrot.html">mandelbrot</a></li>
	<li><a href="byteswap.html">reverse byte order of 32 bit elements</a></li>
	<li><a href="LUT4.html">4-bit lookup table</a></li>
	<li><a href="LUT6.html">6-bit lookup table</a></li>
	<li><a href="hist.html">histogram</a></li>
	<li><a href="ascii_to_utf16.html">ascii to utf16 (zero extend 1->2 bytes)</a></li>
	<li><a href="ascii_to_utf32.html">ascii to utf32 (zero extend 1->4 bytes)</a></li>
	<li><a href="chacha20.html">chacha20</a></li>
	<li><a href="poly1305.html">poly1305</a></li>
	<li><a href="base64_encode.html">base64 encode</a></li>
	<li><a href="trans8x8e8.html">8x8 transpose SEW=8</a></li>
	<li><a href="trans8x8e16.html">8x8 transpose SEW=16</a></li>
</ul>

<!-- TODO(jdqiu): update instruction timings -->
<h2>Instruction timings</h2>
<p>Under construction ...</p>

<p>The following are measured cycle averages when unrolling and looping over the given instruction, which should estimate the instruction throughput. The registers involved are randomized to usual values, that is floating point values are real numbers and not NaN/Inf, and instructions like vslide* stay within the vl range.</p>

<details>
<summary>Example measurement code for vadd.vx</summary>

<table><tr><td>LMUL=1</td><td>LMUL=4</td></tr><tr><td>

<pre>
<code>bench_vaddvx_m1:</code>
<code>m_nop</code>
<code>	li a0, WARMUP</code>
<code>1:</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v9,v17,t1</code>
<code>	vadd.vx v10,v18,t2</code>
<code>	vadd.vx v11,v19,t3</code>
<code>	vadd.vx v12,v20,t4</code>
<code>	vadd.vx v13,v21,t5</code>
<code>	vadd.vx v14,v22,t6</code>
<code>	vadd.vx v15,v23,t7</code>
<code>	addi a0, a0, -1</code>
<code>	bnez a0, 1b</code>
<code>	li a0, LOOP</code>
<code>	rdcycle a1</code>
<code>1:</code>
<code>.rept UNROLL</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v9,v17,t1</code>
<code>	vadd.vx v10,v18,t2</code>
<code>	vadd.vx v11,v19,t3</code>
<code>	vadd.vx v12,v20,t4</code>
<code>	vadd.vx v13,v21,t5</code>
<code>	vadd.vx v14,v22,t6</code>
<code>	vadd.vx v15,v23,t7</code>
<code>.endr</code>
<code>	addi a0, a0, -1</code>
<code>	bnez a0, 1b</code>
<code>	fence.i</code>
<code>	rdcycle a0</code>
<code>	sub a0, a0, a1</code>
<code>	ret</code>
</pre>

</td><td>

<pre>
<code>bench_vaddvx_m4:</code>
<code>	m_nop</code>
<code>	li a0, WARMUP</code>
<code>1:</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v12,v20,t4</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v12,v20,t4</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v12,v20,t4</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v12,v20,t4</code>
<code>	addi a0, a0, -1</code>
<code>	bnez a0, 1b</code>
<code>	li a0, LOOP</code>
<code>	rdcycle a1</code>
<code>1:</code>
<code>.rept UNROLL</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v12,v20,t4</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v12,v20,t4</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v12,v20,t4</code>
<code>	vadd.vx v8,v16,t0</code>
<code>	vadd.vx v12,v20,t4</code>
<code>.endr</code>
<code>	addi a0, a0, -1</code>
<code>	bnez a0, 1b</code>
<code>	fence.i</code>
<code>	rdcycle a0</code>
<code>	sub a0, a0, a1</code>
<code>	ret</code>
</pre>

</td></tr></table>

</details>



<div class="tab">
	<button class="tabSel active" onclick="switchTbl(event, 'tblMaa')">vl=VLMAX ta ma</button>
	<button class="tabSel" onclick="switchTbl(event, 'tblMau')">vl=VLMAX ta mu</button>
	<button class="tabSel" onclick="switchTbl(event, 'tblMua')">vl=VLMAX tu ma</button>
	<button class="tabSel" onclick="switchTbl(event, 'tblMuu')">vl=VLMAX tu mu</button>
	<button class="tabSel" onclick="switchTbl(event, 'tbl1aa')">vl=1 ta ma</button>
	<button class="tabSel" onclick="switchTbl(event, 'tbl1au')">vl=1 ta mu</button>
	<button class="tabSel" onclick="switchTbl(event, 'tbl1ua')">vl=1 tu ma</button>
	<button class="tabSel" onclick="switchTbl(event, 'tbl1uu')">vl=1 tu mu</button>
	<button class="tabSel"><b>Note: VLEN=128</b></button>
</div>


<div class="tblCont tblContv">

<table id="tblMaa" class="tabPage" style="width:100%;">
<thead><tr><th>instruction</th><th>e8m1</th><th>e8m2</th><th>e8m4</th><th>e8m8</th><th>e16m1</th><th>e16m2</th><th>e16m4</th><th>e16m8</th><th>e32m1</th><th>e32m2</th><th>e32m4</th><th>e32m8</th><th>e64m1</th><th>e64m2</th><th>e64m4</th><th>e64m8</th></tr></thead>
<tbody>
<!-- vl = max, tail agnostic and mask agnostic -->
</tbody>
</table>

<table id="tblMau" class="tabPage" style="width:100%;display: none;">
<thead><tr><th>instruction</th><th>e8m1</th><th>e8m2</th><th>e8m4</th><th>e8m8</th><th>e16m1</th><th>e16m2</th><th>e16m4</th><th>e16m8</th><th>e32m1</th><th>e32m2</th><th>e32m4</th><th>e32m8</th><th>e64m1</th><th>e64m2</th><th>e64m4</th><th>e64m8</th></tr></thead>
<tbody>
<!-- vl = max, tail agnostic and mask undisturbed -->
</tbody>
</table>

<table id="tblMua" class="tabPage" style="width:100%;display: none;">
<thead><tr><th>instruction</th><th>e8m1</th><th>e8m2</th><th>e8m4</th><th>e8m8</th><th>e16m1</th><th>e16m2</th><th>e16m4</th><th>e16m8</th><th>e32m1</th><th>e32m2</th><th>e32m4</th><th>e32m8</th><th>e64m1</th><th>e64m2</th><th>e64m4</th><th>e64m8</th></tr></thead>
<tbody>
<!-- vl = max, tail undisturbed and mask agnostic -->
</tbody>
</table>

<table id="tblMuu" class="tabPage" style="width:100%;display: none;">
<thead><tr><th>instruction</th><th>e8m1</th><th>e8m2</th><th>e8m4</th><th>e8m8</th><th>e16m1</th><th>e16m2</th><th>e16m4</th><th>e16m8</th><th>e32m1</th><th>e32m2</th><th>e32m4</th><th>e32m8</th><th>e64m1</th><th>e64m2</th><th>e64m4</th><th>e64m8</th></tr></thead>
<tbody>
<!-- vl = max, tail undisturbed and mask undisturbed -->
</tbody>
</table>

<table id="tbl1aa" class="tabPage" style="width:100%;display: none;">
<thead><tr><th>instruction</th><th>e8m1</th><th>e8m2</th><th>e8m4</th><th>e8m8</th><th>e16m1</th><th>e16m2</th><th>e16m4</th><th>e16m8</th><th>e32m1</th><th>e32m2</th><th>e32m4</th><th>e32m8</th><th>e64m1</th><th>e64m2</th><th>e64m4</th><th>e64m8</th></tr></thead>
<tbody>
<!-- vl = 1, tail agnostic and mask agnostic -->
</tbody>
</table>

<table id="tbl1au" class="tabPage" style="width:100%;display: none;">
<thead><tr><th>instruction</th><th>e8m1</th><th>e8m2</th><th>e8m4</th><th>e8m8</th><th>e16m1</th><th>e16m2</th><th>e16m4</th><th>e16m8</th><th>e32m1</th><th>e32m2</th><th>e32m4</th><th>e32m8</th><th>e64m1</th><th>e64m2</th><th>e64m4</th><th>e64m8</th></tr></thead>
<tbody>
<!-- vl = 1, tail agnostic and mask undisturbed -->
</tbody>
</table>


<table id="tbl1ua" class="tabPage" style="width:100%;display: none;">
<thead><tr><th>instruction</th><th>e8m1</th><th>e8m2</th><th>e8m4</th><th>e8m8</th><th>e16m1</th><th>e16m2</th><th>e16m4</th><th>e16m8</th><th>e32m1</th><th>e32m2</th><th>e32m4</th><th>e32m8</th><th>e64m1</th><th>e64m2</th><th>e64m4</th><th>e64m8</th></tr></thead>
<tbody>
<!-- vl = 1, tail undisturbed and mask agnostic -->
</tbody>
</table>

<table id="tbl1uu" class="tabPage" style="width:100%;display: none;">
<thead><tr><th>instruction</th><th>e8m1</th><th>e8m2</th><th>e8m4</th><th>e8m8</th><th>e16m1</th><th>e16m2</th><th>e16m4</th><th>e16m8</th><th>e32m1</th><th>e32m2</th><th>e32m4</th><th>e32m8</th><th>e64m1</th><th>e64m2</th><th>e64m4</th><th>e64m8</th></tr></thead>
<tbody>
<!-- vl = 1, tail undisturbed and mask undisturbed -->
</tbody>
</table>
</div>

<p>Below are measurements for the scalar instructions, however they weren't measured without register interleaving, and might thus be closer to latency than throughput:<!--obtained using the same methodology as above:--></p>

<div class="tblCont tblConts">

<table style="width:100%;">
<thead><tr><th>instruction</th><th>cycles</th><th>instruction</th><th>cycles</th><th>instruction</th><th>cycles</th></tr></thead>
<tbody>

</tbody>
</table>
</div>

</body>
</html>
